<!DOCTYPE HTML>
<!--
	Powered by Kaiwen Guo, Mohan Lu
-->
<html>
	<head>
		<title>NY Real Time Transit Map</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
		
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
	</head>
	<body class="is-preload">

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Header -->
					<header id="header">

						<!--<div class="logo">

							<span class="icon fa-solid fa-train-subway"></span>
						</div> -->
						<div class="content">
							<div class="inner">
								<h1>NY Transit</h1>
								<p>A web application to offer real-time updates, schedules, and transit information for New York City public transportation system, utilizing the MTA API</p>
							</div>
						</div>
						<nav>
							<ul>
								<li><a href="#intro">Intro</a></li>
								<li><a href="#map">Map</a></li>
								<li><a href="#about">About</a></li>
								<li><a href="#contact">Contact</a></li>
								<li><a href="#login">Login</a></li>
								<!--<li><a href="#elements">Elements</a></li>-->
							</ul>
						</nav>
					</header>

				<!-- Main -->
					<div id="main">

						<!-- Intro -->
							<article id="intro">
								<h2 class="major">Intro</h2>
								<span class="image main"><img src="images/pic01.jpg" alt="" /></span>
								<p>We have built a awesome real time reactive map that cooperates with MTA API. Please check out our <a href="#map">awesome map</a>.</p>
								<p>We are <a href="#about">awesome people</a>. Please <a href="#contact">let us know</a> if you have any questions or concerns.
							</article>

						<!-- Map -->
						<article id="map">
							<h2 class="major">Map</h2>
							<p>The awesome map is shown below</p>
							<p>But it is not fully functional</p>
							<div id="mapid" style="height: 400px;"></div>
							<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
	
							<script>
								function initializeMap() {
									var mymap = L.map('mapid').setView([40.6942, -73.9866], 15);
									L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
										attribution: 'Map data &copy; <a href="https://openstreetmap.org">OpenStreetMap</a> contributors',
										maxZoom: 18,
									}).addTo(mymap);
									var marker = L.marker([40.6942, -73.9866]).addTo(mymap);
							
									// Invalidate size and re-center the map
									mymap.invalidateSize();
									mymap.setView([40.6942, -73.9866], 15);
								}
							
								// Adjusted to ensure the map container is ready
								window.onload = function() {
									setTimeout(initializeMap, 500); // Adjust the delay as needed
								};
							</script>
							
						</article>
						

						<!-- About -->
							<article id="about">
								<h2 class="major">About</h2>
								<span class="image main"><img src="images/IMG_9929.JPG" alt="" /></span>
								<p>Yes thats me Kaiwen Guo and Mohan Lu up there :P</p>
							</article>

						<!-- Contact -->
							<article id="contact">
								<h2 class="major">Contact</h2>
								<form action="https://formspree.io/f/xdoqpajb" method="POST">
									<div class="fields">
										<div class="field half">
											<label for="name">Name</label>
											<input type="text" name="name" id="name" />
										</div>
										<div class="field half">
											<label for="email">Email</label>
											<input type="email" name="email" id="email" />
										</div>
										<div class="field">
											<label for="message">Message</label>
											<textarea name="message" id="message" rows="4"></textarea>
										</div>
									</div>
									<ul class="actions">
										<li><input type="submit" value="Send Message" class="primary" /></li>
										<li><input type="reset" value="Reset" /></li>
									</ul>
								</form>
								
								<ul class="icons">
									<li><a href="https://www.linkedin.com/in/kaiwen-guo-a28a40289/" class="icon brands fa-linkedin"><span class="label">Linkedin</span></a></li>
									<li><a href="https://www.instagram.com/guo_buzai?igsh=N3k0MTBvbmdhYjl3&utm_source=qr" class="icon brands fa-instagram"><span class="label">Instagram</span></a></li>
									<li><a href="https://github.com/kg3354?tab=repositories" class="icon brands fa-github"><span class="label">GitHub</span></a></li>
								</ul>
							</article>

								<!-- Login -->
							<article id="login">
								<h2 class="major">Login</h2>
								<form action="http://localhost:3000/login" method="POST"> <!-- Add this line -->
									<div class="fields">
										<div class="field half">
											<label for="username">User Name</label>
											<input type="text" name="username" id="username" />
										</div>
											<div class="field half">
											<label for="password">Password</label>
											<input type="password" name="password" id="password" />
										</div>
									</div>
									<ul class="actions">
										<li><input type="submit" value="Login" class="primary" /></li>
									</ul>

								</form> <!-- And this line -->
								<li><a href="#register">Register Now</a></li>
							</article>

							<article id="register">
								<h2 class="major">register</h2>
								<form action="http://localhost:3000/register" method="POST"> <!-- Add this line -->
									<div class="fields">
										<div class="field half">
											<label for="username">User Name</label>
											<input type="text" name="username" id="username" />
										</div>
											<div class="field half">
											<label for="password">Password</label>
											<input type="password" name="password" id="password" />
										</div>
									</div>
									<ul class="actions">
										<li><input type="submit" value="Register" class="primary" /></li>
									</ul>

								</form> <!-- And this line -->
						
							</article>



					</div>

				<!-- Footer -->
					<footer id="footer">
						<p class="copyright">&copy; Great Design By Us</a>.</p>
					</footer>

			</div>

		<!-- BG -->
			<div id="bg"></div>
			
		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>
			<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
			<script src="assets/js/mapInit.js"></script>
			<script>
				document.querySelector('#login form').addEventListener('submit', function(event) {
				event.preventDefault(); // Prevent the form from submitting normally

				const formData = new FormData(this);
				fetch('/login', {
				method: 'POST',
				body: formData
				})
				.then(response => response.json()) // Parse JSON response
				.then(data => {
				if (data.loginSuccess) {
					localStorage.setItem('isLoggedIn', 'true');
					window.location.href = '/notifications'; // Adjust if necessary
				} else {
					alert(data.message); // Show login failure message from server
				}
				})
				.catch(error => console.error('Error:', error));
			});

			</script>
			  
			


	</body>
</html>
